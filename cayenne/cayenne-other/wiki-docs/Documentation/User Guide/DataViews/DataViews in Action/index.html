<!--
   Licensed to the Apache Software Foundation (ASF) under one
   or more contributor license agreements.  See the NOTICE file
   distributed with this work for additional information
   regarding copyright ownership.  The ASF licenses this file
   to you under the Apache License, Version 2.0 (the
   "License"); you may not use this file except in compliance
   with the License.  You may obtain a copy of the License at
 
     http://www.apache.org/licenses/LICENSE-2.0
 
   Unless required by applicable law or agreed to in writing,
   software distributed under the License is distributed on an
   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   KIND, either express or implied.  See the License for the
   specific language governing permissions and limitations
   under the License.
-->
<html>
  <head>
    <title>Apache Cayenne Documentation - DataViews in Action</title>
    <style type="text/css">@import "../../../../style.css";</style>
  </head>
<body>
  <div class="header">
    <div style="float: left;"><a href="http://incubator.apache.org/cayenne/"><img src="../../../../images/logo.gif" align="absmiddle" border="0"></a></div>
    <span class="logoSpaceLink"><a href="../../../../index.html">Cayenne User Documentation</a></span><br />
    <span class="pagetitle">DataViews in Action</span>
  </div>
<div id="cayenne_toc">
<ul>
<li><a href="../../../../Documentation/User Guide/Introduction/index.html">Introduction</a></li>
<li><a href="../../../../Documentation/User Guide/Installation/index.html">Installation</a></li>
<li><a href="../../../../Documentation/User Guide/Quick Start/index.html">Quick Start</a></li>
<li><a href="../../../../Documentation/User Guide/Design/index.html">Design</a></li>
<li><a href="../../../../Documentation/User Guide/DataContext/index.html">DataContext</a></li>
<li><a href="../../../../Documentation/User Guide/Queries/index.html">Queries</a></li>
<li><a href="../../../../Documentation/User Guide/DataObjects/index.html">DataObjects</a></li>
<li><a href="../../../../Documentation/User Guide/Stored Procedures/index.html">Stored Procedures</a></li>
<li><a href="../../../../Documentation/User Guide/Expressions/index.html">Expressions</a></li>
<li><a href="../../../../Documentation/User Guide/Performance Tuning/index.html">Performance Tuning</a></li>
<li><a href="../../../../Documentation/User Guide/Deployment/index.html">Deployment</a></li>
<li><a href="../../../../Documentation/User Guide/Ant Tasks/index.html">Ant Tasks</a></li>
<li><a href="../../../../Documentation/User Guide/Customizing/index.html">Customizing</a></li>
<li><a href="../../../../Documentation/User Guide/DataViews/index.html">DataViews</a><ul>
<li><a href="../../../../Documentation/User Guide/DataViews/Swing Applications/index.html">Swing Applications</a></li>
<li><a href="../../../../Documentation/User Guide/DataViews/DataView Concepts/index.html">DataView Concepts</a></li>
<li><a href="../../../../Documentation/User Guide/DataViews/DVModeler GUI Tool/index.html">DVModeler GUI Tool</a></li>
<li><a href="../../../../Documentation/User Guide/DataViews/DataViews in Action/index.html">DataViews in Action</a><ul>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div id="ConfluenceContent">

<p>Here we illustrate the discussion of DataViews with configuration samples and code snippets. Cayenne project DTD file supports references to data view configuration files. This information is loaded into the Cayenne Configuration instance along with the DataDomain, DataNode, and DataMap entries. Since the DataView functionality is optional and would not be very useful in some deployment scenarios (server-side applications) the DataView configiuration itself is not loaded at the time of initialization. Neither DataView instances are created by the configuration process. A DataView can be created in a Swing application with the code similar to the following:</p>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-comment">//Assume, <span class="code-keyword">this</span> is your Cayenne Configuration instance.
</span>Configuration cayenneConfiguration = ...;

<span class="code-comment">//You will need to setup a Cayenne EntityResolver in your DataView
</span><span class="code-comment">//For example you can retrieve it from the DataContext in use
</span><span class="code-comment">//with dataContext.getEntityResolver();
</span><span class="code-comment">//or construct your own composite one, spanning several Data Domains.
</span>EntityResolver entityResolver = ...;

<span class="code-comment">//Create <span class="code-keyword">new</span> DataView instance, and set its entityResolver
</span><span class="code-comment">//*before* loading the actual configuration
</span>DataView dataView = <span class="code-keyword">new</span> DataView();
dataView.setEntityResolver(entityResolver);

<span class="code-comment">//Load the configuration
</span>cayenneConfiguration.loadDataView(dataView);

<span class="code-comment">//Here we go. Our Data View is ready to be used in the application
</span><span class="code-comment">//This way you can create several of them, completely separated <span class="code-keyword">if</span> needed.</span></pre>
</div></div>     

<p>It is worth mentioning one instance of DataView serves to incorporate several Data View configurations saved in different files. Therefore it defines single namespace and easily resolves inter-configuration references among the ObjEntityViews</p>

<p>Next, let us see how a Swing table model and JTable can be configured with our Data View to display and edit a list of data objects.</p>

<div class="code"><div class="codeContent">
<pre class="code-java">DataView dataView = ...;

JTable featureTable = ...;
ObjEntityView featureView = dataView.getObjEntityView(<span class="code-quote">"ProductFeatureView"</span>);

<span class="code-comment">// This is a descendant of javax.swing.table.AbstractTableModel
</span>DOTableModel tableModel = <span class="code-keyword">new</span> DOTableModel();
tableModel.setView(featureView);

<span class="code-comment">// Retrieve a list of data objects (with SelectQuery, say)
</span><span class="code-comment">// and initialize the model with it
</span>DataObjectList featureDataObjects = ...;
tableModel.setDataObjects(matrixEntries);

featureTable.setModel(tableModel);

<span class="code-comment">// set the apropriate TableCellRenderers and Editors
</span><span class="code-keyword">new</span> CellRenderers().installRenderers(featureTable);
<span class="code-keyword">new</span> CellEditors().installEditors(featureTable);</pre>
</div></div>  

<p>In fact, there is many more cool things you could do with DataViews to build your Cayenne enabled Swing rich client faster and cleaner, and separate the GUI related stuff from your domain logic defining the clear declarative rules telling the framework how to interprete, render, and edit the ObjEntities and DataObjects your application relies upon. </p></div>
</div>
  <div class="clearer">.</div>
  <div style="height: 12px; background-image: url('../../../../images/border_bottom.gif'); background-repeat: repeat-x;"></div>

  <div class="smalltext copyright">
    Copyright &copy;2001-2006 Apache Software Foundation
  </div>

</body>
</html>
