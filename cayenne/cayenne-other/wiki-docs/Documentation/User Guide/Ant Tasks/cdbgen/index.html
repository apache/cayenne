<html>
  <head>
    <title>Cayenne Documentation - cdbgen</title>
    <style type="text/css">@import "../../../../style.css";</style>
  </head>
<body>
  <div class="header">
    <div style="float: left;"><a href="http://objectstyle.org/cayenne/"><img src="../../../../images/logo.gif" align="absmiddle" border="0"></a></div>
    <span class="logoSpaceLink"><a href="../../../../index.html">Cayenne User Documentation</a></span><br />
    <span class="pagetitle">cdbgen</span>
  </div>
<div id="cayenne_toc">
<ul>
<li><a href="../../../../Documentation/User Guide/Introduction/index.html">Introduction</a></li>
<li><a href="../../../../Documentation/User Guide/Installation/index.html">Installation</a></li>
<li><a href="../../../../Documentation/User Guide/Quick Start/index.html">Quick Start</a></li>
<li><a href="../../../../Documentation/User Guide/Design/index.html">Design</a></li>
<li><a href="../../../../Documentation/User Guide/DataContext/index.html">DataContext</a></li>
<li><a href="../../../../Documentation/User Guide/Queries/index.html">Queries</a></li>
<li><a href="../../../../Documentation/User Guide/DataObjects/index.html">DataObjects</a></li>
<li><a href="../../../../Documentation/User Guide/Stored Procedures/index.html">Stored Procedures</a></li>
<li><a href="../../../../Documentation/User Guide/Expressions/index.html">Expressions</a></li>
<li><a href="../../../../Documentation/User Guide/Performance Tuning/index.html">Performance Tuning</a></li>
<li><a href="../../../../Documentation/User Guide/Deployment/index.html">Deployment</a></li>
<li><a href="../../../../Documentation/User Guide/Ant Tasks/index.html">Ant Tasks</a><ul>
<li><a href="../../../../Documentation/User Guide/Ant Tasks/cgen/index.html">cgen</a></li>
<li><a href="../../../../Documentation/User Guide/Ant Tasks/cdbgen/index.html">cdbgen</a><ul>
</ul>
</li>
<li><a href="../../../../Documentation/User Guide/Ant Tasks/cdeploy/index.html">cdeploy</a></li>
<li><a href="../../../../Documentation/User Guide/Ant Tasks/cdataport/index.html">cdataport</a></li>
</ul>
</li>
<li><a href="../../../../Documentation/User Guide/Customizing/index.html">Customizing</a></li>
<li><a href="../../../../Documentation/User Guide/DataViews/index.html">DataViews</a></li>
</ul>
</div>
<div id="ConfluenceContent"><p><tt>cdbgen</tt> is an Ant task that uses Cayenne DataMap to drop and/or generate schema objects of a specified database.</p>

<h3><a name="cdbgen-Parameters"></a>Parameters</h3>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>Attribute</th>
<th class='confluenceTh'>Description</th>
<th class='confluenceTh'>Required</th>
</tr>
<tr>
<td class='confluenceTd'>map</td>
<td class='confluenceTd'>DataMap XML file to use as a schema descriptor.</td>
<td class='confluenceTd'>Yes</td>
</tr>
<tr>
<td class='confluenceTd'>adapter</td>
<td class='confluenceTd'>Java class implementing org.objectstyle.cayenne.dba.DbAdapter. While this attribute is optional (a generic JdbcAdapter is used if not set), it is highly recommended to specify correct target adapter.</td>
<td class='confluenceTd'>No (but strongly recommended)</td>
</tr>
<tr>
<td class='confluenceTd'>driver</td>
<td class='confluenceTd'>A class of JDBC driver to use for the target database.</td>
<td class='confluenceTd'>Yes</td>
</tr>
<tr>
<td class='confluenceTd'>url</td>
<td class='confluenceTd'>JDBC connection URL of a target database.</td>
<td class='confluenceTd'>Yes</td>
</tr>
<tr>
<td class='confluenceTd'>username</td>
<td class='confluenceTd'>Database user name.</td>
<td class='confluenceTd'>No</td>
</tr>
<tr>
<td class='confluenceTd'>password</td>
<td class='confluenceTd'>Database user password.</td>
<td class='confluenceTd'>No</td>
</tr>
<tr>
<td class='confluenceTd'>droptables</td>
<td class='confluenceTd'>Defines whether cdbgen should drop the tables before attempting to create new ones. Default is "No".</td>
<td class='confluenceTd'>No</td>
</tr>
<tr>
<td class='confluenceTd'>droppk</td>
<td class='confluenceTd'>Defines whether cdbgen should drop Cayenne primary key support objects. Default is "No".</td>
<td class='confluenceTd'>No</td>
</tr>
<tr>
<td class='confluenceTd'>createtables</td>
<td class='confluenceTd'>Defines whether cdbgen should create new tables. Default is "Yes".</td>
<td class='confluenceTd'>No</td>
</tr>
<tr>
<td class='confluenceTd'>createpk</td>
<td class='confluenceTd'>Defines whether cdbgen should create Cayenne-specific auto PK objects. Default is "Yes".</td>
<td class='confluenceTd'>No</td>
</tr>
<tr>
<td class='confluenceTd'>createfk</td>
<td class='confluenceTd'>Defines whether cdbgen should create foreign key copnstraints. Default is "Yes".</td>
<td class='confluenceTd'>No</td>
</tr>
</tbody></table>

<table cellpadding='5' width='85%' cellspacing='8px' class='noteMacro' border="0" align='center'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="../../../../images/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">Driver Classpath</b><br />Support for "classpath" or "classpathref" attributes is pending. To work around this limitation, JDBC driver (and custom DbAdapter) classpath can be appended to the classpath used to load the task via "taskdef".</td></tr></table>

<h3><a name="cdbgen-Example"></a>Example</h3>
<p>Here is an example of using <tt>cdbgen</tt> to create DB schema objects on a local HSQLDB.</p>

<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;taskdef name=<span class="code-quote">"cdbgen"</span> classname=<span class="code-quote">"org.objectstyle.cayenne.tools.DbGeneratorTask"</span>&gt;</span>
    <span class="code-tag">&lt;classpath refid=<span class="code-quote">"classpath"</span>/&gt;</span>
<span class="code-tag">&lt;/taskdef&gt;</span>

&lt;cdbgen map=<span class="code-quote">"${context.dir}/WEB-INF/DefaultMap.map.xml"</span> 
    adapter=<span class="code-quote">"org.objectstyle.cayenne.dba.hsqldb.HSQLDBAdapter"</span>
    driver=<span class="code-quote">"org.hsqldb.jdbcDriver"</span> 
    url=<span class="code-quote">"jdbc:hsqldb:hsql://localhost/bookmarker"</span> 
    username=<span class="code-quote">"sa"</span>/&gt;</pre>
</div></div></div>
</div>
  <div class="clearer">.</div>
  <div style="height: 12px; background-image: url('../../../../images/border_bottom.gif'); background-repeat: repeat-x;"></div>

  <div class="smalltext copyright">
    Copyright &copy;2001-2006 ObjectStyle Group and content authors
  </div>

</body>
</html>
