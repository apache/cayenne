<!-- 
	An ant file to run JMeter client.
-->
<project default="jmeter">
	
	<property name="jmeter.jmx" value="src/main/jmeter/cayenne-profile.jmx"/>
	<property name="jmeter.html" value="target/jmeter/cayenne-profile.html"/>
	<path id="jmeter.classpath">
			<fileset dir="${jmeter.home}/" includes="**/*.jar"/>
	</path>
	
	<target name="jmeter">
		<taskdef
		    name="jmeter"
		    classname="org.programmerplanet.ant.taskdefs.jmeter.JMeterTask" 
			classpathref="jmeter.classpath"/>
		
		<mkdir dir="target/jmeter"/>
		<delete>
			<fileset dir="target/jmeter"/>
		</delete>
		
		<jmeter
		    jmeterhome="${jmeter.home}"
		    testplan="${jmeter.jmx}"
		    resultlog="target/jmeter/cayenne-profile.jtl"/>
		
		<xslt
		    in="target/jmeter/cayenne-profile.jtl"
		    out="${jmeter.html}"
		    style="src/main/jmeter/jmeter-results-report.xsl"/>
	</target>
	
</project>
